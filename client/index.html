<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
    <title>TileMill</title>
    <link rel='shortcut icon' href='images/favicon.ico' type='image/x-icon' />
    <link rel='stylesheet' href='css/reset.css' type='text/css'/>
    <link rel='stylesheet' href='css/tilemill.css' type='text/css'/>
    <link rel='stylesheet' href='js/libraries/tipsy/src/stylesheets/tipsy.css' type='text/css'/>
    <link rel='stylesheet' href='js/libraries/colorpicker/css/colorpicker.css' type='text/css'/>

    <script type='text/javascript' src='js/libraries/md5.js'></script>
    <script type='text/javascript' src='js/libraries/base64.js'></script>
    <script type='text/javascript' src='js/libraries/jquery.js'></script>
    <script type='text/javascript' src='js/libraries/underscore-min.js'></script>
    <script type='text/javascript' src='js/libraries/backbone.js'></script>
    <script type='text/javascript' src='js/libraries/jquery-ui.js'></script>
    <script type='text/javascript' src='js/libraries/jquery.tablesorter.min.js'></script>
    <script type='text/javascript' src='js/libraries/ICanHaz.min.js'></script>
    <script type='text/javascript' src='js/libraries/openlayers/OpenLayers.js'></script>
    <script type='text/javascript' src='js/libraries/colorpicker/js/colorpicker.js'></script>
    <script type='text/javascript' src='js/libraries/codemirror/js/codemirror.js'></script>
    <script type='text/javascript' src='js/libraries/tipsy/src/javascripts/jquery.tipsy.js'></script>

    <!-- common server/client side js -->
    <script type='text/javascript' src='project.js'></script>

    <script type='text/javascript' src='js/app.utils.js'></script>
    <script type='text/javascript' src='js/app.tools.js'></script>
    <script type='text/javascript' src='js/app.project.js'></script>
    <script type='text/javascript' src='js/app.export.js'></script>
    <script type='text/javascript' src='js/app.layer.js'></script>
    <script type='text/javascript' src='js/app.stylesheet.js'></script>
    <script type='text/javascript' src='js/app.reference.js'></script>
    <script type='text/javascript' src='js/app.asset.js'></script>
    <script type='text/javascript' src='js/app.map.js'></script>
    <script type='text/javascript' src='js/app.js'></script>
    <script type='text/javascript' src='js/data.reference.js'></script>

    <!--
    @TODO head.js is causing problems with browser caches during development.
    <script type='text/javascript' src='js/libraries/head.min.js'></script>
    <script type='text/javascript'>
    head.js(
        'js/libraries/md5.js',
        'js/libraries/base64.js',
        'js/libraries/jquery.js',
        'js/libraries/underscore-min.js',
        'js/libraries/backbone.js',
        'js/libraries/jquery-ui.js',
        'js/libraries/jquery.tablesorter.min.js',
        'js/libraries/ICanHaz.min.js',
        'js/openlayers/OpenLayers.js',
        'js/codemirror/js/codemirror.js',
        'js/app.utils.js',
        'js/app.tools.js',
        'js/app.project.js',
        'js/app.export.js',
        'js/app.layer.js',
        'js/app.stylesheet.js',
        'js/app.reference.js',
        'js/app.asset.js',
        'js/app.map.js',
        'js/app.js',
        'js/data.reference.js',
    );
    </script>
    -->
    <script type='text/html' id='ProjectListView'>
    <div id='header' class='header clearfix'>
      <a class='icon settings' href='#'>Settings</a>
      <h1>TileMill</h1>
    </div>
    <div id='content' class='clearfix'>
      <div id='main'>
        <ul class='pane projects clearfix'></ul>
      </div>
      <div id='sidebar'>
        <div class='pane'>
          <form id='projects' class='projects pane'>
            <h2>Add a project</h2>
            <p>Enter the name of your new project.</p>
            <input class='required text alphanum' type='text' />
            <input class='submit' type='submit' value='Add' />
          </form>
        </div>
      </div>
    </div>
    </script>

    <script type='text/html' id='LoadingView'>
      <div class='loading'>
        <div class='loading-text'>{{message}}</div>
      </div>
    </script>

    <script type='text/html' id='ErrorView'>
      <div id='header' class='header clearfix'>
        <h1>TileMill</h1>
      </div>
      <div id='content' class='clearfix'>
          <div class='error-page'>{{ message }}</div>
      </div>
    </script>

    <script type='text/html' id='ProjectRowView'>
      <a href='#project/{{id}}'>
        <span class='thumb'><img src='{{ thumb }}'/></span>
        {{id}}
        <span class='icon delete'>Delete</span>
      </a>
    </script>

    <script type='text/html' id='ProjectView'>
      <div id='header' class='header clearfix'>
        <a class='icon settings' href='#'>Settings</a>
        <h1>Editing {{ id }}</h1>
        <div class='actions clearfix'>
          <a class='save disabled' href='#'>Saved</a>
          <a class='tipsy-e icon close' title='Back home' href='#'>Back home</a>
        </div>
      </div>
      <div id='main'></div>
      <div id='sidebar'></div>
    </script>

    <script type='text/html' id='LayerListView'>
      <div class='sidebar-header clearfix pane'>
        <h2>Layers</h2>
        <a title='Add layer' href='#' class='tipsy-e icon add'>Add layer</a>
      </div>
      <ul class='sidebar-content'></ul>
    </script>

    <script type='text/html' id='LayerRowView'>
      <div class='handle'></div>
      <a title='{{geometry}}' class='icon geometry geometry-{{geometry}}'></a>
      <a title='Delete layer' class='icon delete' href='#'>Delete</a>
      <a title='Inspect layer values' class='icon inspect' href='#'>Inspect</a>
      <a title='Edit layer' class='icon edit' href='#'>Edit</a>
      <label>{{ name }}</label>
    </script>

    <script type='text/html' id='DatasourceView'>
      <table class='features'>
        <thead>
          <tr>
            {{#fields}}
              <th class='{{type}}'><a title='{{{tooltip}}}'>{{name}}</a></th>
            {{/fields}}
          </tr>
        </thead>
        <tbody>
          {{{rows}}}
        </tbody>
      </table>
    </script>

    <script type='text/html' id='DatasourceToolTip'>
      <div>{{type}}</div>
      {{#numeric}}
      <div>Max: {{max}}</div>
      <div>Min: {{min}}</div>
      {{/numeric}}
      {{^numeric}}
      <div>Longest: {{max}}</div>
      <div>Shortest: {{min}}</div>
      {{/numeric}}
    </script>

    <script type='text/html' id='DatasourceRowsView'>
      {{#features}}
        <tr>
          {{#values}}
          <td class='{{type}}'>{{value}}</td>
          {{/values}}
        </tr>
      {{/features}}
    </script>

    <script type='text/html' id='DatasourceViewAllRowsButtonView'>
      <div class="showall"><a class="button" href="#">Show all ({{deferredCount}} more)</a></div>
    </script>

    <script type='text/html' id='MapView'>
      <div id='map-preview-{{id}}'>
        <a class='icon map-fullscreen' href='#'>Fullscreen</a>
        <div id='zoom-display'><h4>Zoom level ?</h4><div class='zoom-in'>+</div><div class='zoom-out'></div>
      </div>
    </script>

    <script type='text/html' id='StylesheetListView'>
      <div id='tabs'>
        <div class='stylesheets clearfix'></div>
        <a title='Add stylesheet' class='tipsy-e icon add' href='#'>Add stylesheet</a>
        <a title='Stylesheet reference guide' class='tipsy-e icon reference' href='#'>Reference</a>
      </div>
      <div id='editor' class='view'></div>
    </script>

    <script type='text/html' id='StylesheetTabView'>
      <span class='name'>{{ id }}</span>
      <span class='icon delete'>Delete</span>
    </script>

    <script type='text/html' id='StylesheetTabEditor'>
      <div class='editor'><textarea></textarea></div>
    </script>

    <script type='text/html' id='StylesheetTools'>
      <div class='sidebar-header sidebar-tabs clearfix'>
        <a href='#' class='show-colors tab first active'>Colors</a>
        <a href='#' class='show-fonts tab last inactive'>Fonts</a>
      </div>
    </script>

    <script type='text/html' id='FontPicker'>
      <input class='text' title='Filter list' />
      <ul class='fonts-list'>
        {{#fonts}}<li>{{.}}</li>{{/fonts}}
      </ul>
    </script>

    <script type='text/html' id='ColorSwatches'>
      <div class='swatches clearfix pane'></div>
    </script>
    
    <script type='text/html' id='ColorPicker'>
      <a class='tipsy-e icon color-picker' title="Color picker" href='#color-picker'>Color picker</a>
    </script>

    <script type='text/html' id='DrawerView'>
      <div class='sidebar-header clearfix pane'>
        <h2>{{title}}</h2>
        <a class='icon close' href='#'>Close</a>
      </div>
      <div class='drawer-content'>
        {{{content}}}
      </div>
    </script>

    <script type='text/html' id='PopupView'>
      <div id='popup'>
        <div class='popup-backdrop'></div>
        <div class='popup'>
          <div class='popup-header clearfix pane'>
            <h2>{{ title }}</h2>
            <a href='#' class='icon close'>Close</a>
          </div>
          <div class='popup-content'>{{{ content }}}</div>
        </div>
      </div>
    </script>

    <script type='text/html' id='ExportOptions'>
      <ul>
        {{#png}}<li><a class='export-option export-png' href='#png'>PNG</a></li>{{/png}}
        {{#pdf}}<li><a class='export-option export-pdf' href='#pdf'>PDF</a></li>{{/pdf}}
        {{#mbtiles}}<li><a class='export-option export-mbtiles' href='#mbtiles'>MBTiles</a></li>{{/mbtiles}}
        <li class='divider'><a class='jobs' href='#'>View exports</a></li>
      </ul>
    </script>

    <script type='text/html' id='LayerPopupView'>
      <div id='popup-layer' class='clearfix pane'>
        <form id='form-layer'>
          <div><label for='id'>Id <span class="required" title="This field is required">*</span></label>
            <input type='text' class='text required' id='id' value='{{ id }}' />
          </div>
          <div><label for='class'>Class</label>
            <input type='text' class='text' id='class' value='{{ class }}'/>
          </div>
          <div>
            <label for='file'>Datasource <span class="required" title="This field is required">*</span></label>
            <input type='text' class='text required' id='file' value='{{ datasource_file }}' />
            <a class='icon expand-assets' id='expand-assets' title='See available assets'>[+]</a>
            <div class='container assets hidden'></div>
          </div>
          <div>
            <label for='srs-name'>SRS</label>
            <select id='srs-name'>
              <option value='' {{#srs_name_autodetect}}selected='selected'{{/srs_name_autodetect}}>Autodetect</option>
              <option value='900913' {{#srs_name_900913}}selected='selected'{{/srs_name_900913}}>900913</option>
              <option value='WGS84' {{#srs_name_WGS84}}selected='selected'{{/srs_name_WGS84}}>WGS84</option>
              <option value='custom' {{#srs_name_custom}}selected='selected'{{/srs_name_custom}}>Add custom</option>
            </select>
          </div>
          <div class='srs {{^srs_name_custom}}hidden{{/srs_name_custom}}'>
            <label for='srs'>Custom</label>
            <input type='text' class='text' id='srs' value='{{ srs }}'/>
          </div>
          <div class='buttons'>
              <input class='submit' type='submit' value='Save' />
          </div>
        </form>
      </div>
    </script>

    <script type='text/html' id='StylesheetPopupView'>
      <div id='popup-stylesheet' class='clearfix pane'>
        <form>
          <div>
            <label for='stylesheet-name'>Name</label>
            <input id='stylesheet-name' class='text required' type='text' />
          </div>
          <div class='buttons'>
            <input class='submit' type='submit' value='Add stylesheet' />
          </div>
        </form>
      </div>
    </script>

    <script type='text/html' id='PopupMessage'>
      <div id='popup-message' class='clearfix pane {{ type }}'>
        {{ message }}
      </div>
    </script>

    <script type='text/html' id='DropdownView'>
      <a class='show' href='#'>{{title}} <span class='icon dropdown'></span></a>
      <div class='dropdown-content'>
        {{{content}}}
      </div>
    </script>

    <script type='text/html' id='ColorSwatchView'>
      <a href='#' class='swatch' style='background-color: {{ color }}' title='{{ color }}'></a>
    </script>

    <script type='text/html' id='ReferenceView'>
      <ul class='reference-links clearfix'>
        <li><a class='active' href='#reference-section-intro'>intro</a></li>
        {{#symbolizers}}
          <li><a href='#reference-section-{{symbolizer}}'>{{symbolizer}}</a></li>
        {{/symbolizers}}
      </ul>
      <div class='reference-section active' id='reference-section-intro'>
        <h2>Introduction</h2>
        <p>TileMill supports the <a href='https://github.com/mapnik/Cascadenik'>Cascadenik</a>
        styling language. It should be familiar to <a href='http://www.w3schools.com/css/'>CSS</a>
        users and easy to pick up for everyone else.</p>
        <p>A simple Cascadenik style looks like</p>
<pre>
#world {
  polygon-fill: #eee;
  line-color: #ccc;
  line-width: 0.5;
}
</pre>
        <p>Which is the <em>selector</em> <code>#world</code>
        - which makes this affect the layer with the id <code>world</code>,
        and then three <em>declarations</em> which color the countries 
        the color <code>#eee</code> and give them a grey line <code>0.5</code>
        units wide.</p>

        <p>There are other selectors you can use to affect different parts of a map</p>

        <ul>
            <li><code>* { }</code>: All layers
            <li><code>.red { }</code>: Only layers with the class 'red'
            <li><code>.blue[zoom>8] { }</code> Only layers with the class blue, zoomed beyond 8
            <li><code>#countries NAME { }</code> Country names, from a layer with id country an a 
        property called NAME
        </ul>
      </div>

      {{#symbolizers}}
        {{>ReferenceSymbolizer}}
      {{/symbolizers}}
    </script>

    <script type='text/html' class='partial' id='ReferenceSymbolizer'>
      <div class='reference-section' id='reference-section-{{symbolizer}}'>
        <h2>{{ symbolizer }}</h2>
        <table class='reference-table'>
          <thead>
            <tr>
              <th>css parameter</th>
              <th>type</th>
              <th>default value</th>
            </tr>
          </thead>
          {{#properties}}
            {{>ReferenceProperty}}
          {{/properties}}
        </table>
      </div>
    </script>

    <script type='text/html' class='partial' id='ReferenceProperty'>
      <tr>
        <th><a {{#doc}}title='{{ doc }}' class='reference-doc-available'{{/doc}}>{{ css }}</a>
        </th>
        <td>{{ type }}</td>
        <td>{{ default_value }}
          {{#default_meaning}}
            <small class='reference-default-meaning'>({{ default_meaning }})</small>
          {{/default_meaning}}
        </td>
      </tr>
    </script>

    <script type='text/html' id='AssetRowView'>
      <span class='name'>{{ id }}</span>
      <span class='metadata'>{{ bytes }}</span>
      <span class='url'>{{ url }}</span>
    </script>

    <script type='text/html' id='ExportListView'>
      <ul class='sidebar-content jobs clearfix'></ul>
    </script>

    <script type='text/html' id='ExportRowView'>
      <a href='#' class='icon delete'>Remove</a>
      <span class='status status-{{status}}'>{{ status }}</span>
      <span class='progress'>
        <span class='bar bar-{{progressClass}}'></span>
        {{ progress }}%
      </span>
      {{#download}}
        <a class='file {{ type }}' href='{{ download }}'></a>
      {{/download}}
      {{^download}}
        <span class='file {{ type }}'></span>
      {{/download}}
      <a class='filename'>{{ filename }}</a>
      <span class='time'>{{ time }}</span>
      {{#error}}
        <div class='message'>{{ error }}</div>
      {{/error}}
      {{#download}}
        <div class='download'><a href='{{ download }}'>Download</a></div>
      {{/download}}
    </script>

    <script type='text/html' id='ExportView'>
      <form id='export'>
        <div class='header clearfix'>
          <span class='file {{ type }}'></span>
          <h1>{{ title }}</h1>
          <div class='form'>
            <label class='inline' for='filename'>Filename</label>
            <input type='text' class='inline text' id='filename'/>
            <input class='submit' type='submit' value='Export' />
            <a class='icon close' href='#'>Back home</a>
          </div>
        </div>
        <div class='palette pane clearfix'>
          <div>
            <div class='help'>
              <strong class='key'>SHIFT + drag</strong> to crop
            </div>
            <div class='bbox-frame'>
              <a href='#' class='reset'>Reset</a>
              <input type='text' class='bbox text' id='bbox-n' />
              <input type='text' class='bbox text' id='bbox-e' />
              <input type='text' class='bbox text' id='bbox-s' />
              <input type='text' class='bbox text' id='bbox-w' />
            </div>
          </div>
        </div>
      </form>
    </script>

    <script type='text/html' id='ExportImageView'>
      <div>
        <label for='class'>Dimensions</label>
        <input type='text' class='text' size='3' id='width' value='{{ width }}'/>
        <span>x</span>
        <input type='text' class='text' size='3' id='height' value='{{ height }}'/>
        px
      </div>
    </script>

    <script type='text/html' id='ExportMBTilesView'>
      <div>
        <label>
            Zoom Levels (
            <span class='min-zoom'>{{minzoom}}</span>
            to
            <span class='max-zoom'>{{maxzoom}}</span>
            )
        </label>
        <div id='mbtiles-zoom'></div>
      </div>
      <div>
        <label for='metadata_name'>Name</label>
        <input type='text' id='metadata_name' class='text' value='{{ metadata_name }}' />
      </div>
      <div>
        <label for='metadata_description'>Description</label>
        <input type='text' id='metadata_description' class='text' value='{{ metadata_description }}' />
      </div>
      <div>
        <label for='metadata_version'>Version</label>
        <input type='text' id='metadata_version' class='text' value='{{ metadata_version }}' />
      </div>
      <div>
        <label for='metadata_type'>Type</label>
        <select id='metadata_type'>
            <option value='baselayer' {{#metadata_type_baselayer}}selected='selected'{{/metadata_type_baselayer}}>Base layer</option>
            <option value='overlay' {{^metadata_type_baselayer}}selected='selected'{{/metadata_type_baselayer}}>Overlay</option>
        </select>
      </div>
    </script>

    <script type='text/html' id='SettingsPopupView'>
      <div id='popup-settings' class='clearfix pane'>
        <form id='form-layer'>
          <div>
            <h3>About TileMill</h3>
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Nunc laoreet. In rhoncus ultrices metus. Nunc ut tellus. Ut tortor. Curabitur nisi nulla, malesuada sit amet, feugiat non, elementum eu, arcu. Curabitur pretium velit et sem.</p>
          </div>
          <div><label for='mode'>Editing mode</label>
            <select id='mode'>
                <option value='normal' {{^minimal_mode}}selected='selected'{{/minimal_mode}}>Normal</option>
                <option value='minimal' {{#minimal_mode}}selected='selected'{{/minimal_mode}}>Minimal</option>
            </select>
          </div>
          <div>
            <label for='directory-path'>Data Directory</label>
            <input type='text' class='text required' id='directory-path' value='{{ directory_path }}' />
          </div>
          <div>
            <label for='s3-bucket'>S3 Bucket</label>
            <input type='text' class='text required' id='s3-bucket' value='{{ s3_bucket }}' />
          </div>
          <div>
            <label for='s3-key'>S3 Access Key ID</label>
            <input type='text' class='text required' id='s3-key' value='{{ s3_key }}' />
          </div>
          <div>
            <label for='s3-secret'>S3 Secret</label>
            <input type='text' class='text required' id='s3-secret' value='{{ s3_secret }}' />
          </div>
          <div class='buttons'>
              <input class='submit' type='submit' value='Save' />
          </div>
        </form>
      </div>
    </script>

  <body>
    <div id='app'></div>
  </body>
</html>
